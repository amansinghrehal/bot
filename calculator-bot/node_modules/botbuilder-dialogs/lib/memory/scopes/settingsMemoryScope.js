"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @module botbuilder-dialogs
 */
/**
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
const memoryScope_1 = require("./memoryScope");
const scopePath_1 = require("../scopePath");
/**
 * SettingsMemoryScope maps "settings" -> dc.context.turnState['settings']
 */
class SettingsMemoryScope extends memoryScope_1.MemoryScope {
    /**
     * Initializes a new instance of the [SettingsMemoryScope](xref:botbuilder-dialogs.SettingsMemoryScope) class.
     */
    constructor() {
        super(scopePath_1.ScopePath.settings, false);
    }
    /**
     * Gets the backing memory for this scope.
     * @param dc The [DialogContext](xref:botbuilder-dialogs.DialogContext) object for this turn.
     * @returns The memory for the scope.
     */
    getMemory(dc) {
        let settings = {};
        if (dc.context.turnState.has(scopePath_1.ScopePath.settings)) {
            settings = dc.context.turnState.get(scopePath_1.ScopePath.settings);
        }
        for (const key in process.env) {
            if (!SettingsMemoryScope.blockingList.some(u => u.toLowerCase() === key.toLowerCase()) && typeof process.env[key] == 'string') {
                settings[key] = process.env[key];
            }
        }
        return settings;
    }
}
SettingsMemoryScope.blockingList = [
    'MicrosoftAppPassword',
    'cosmosDb:authKey',
    'blobStorage:connectionString',
    'BlobsStorage:connectionString',
    'CosmosDbPartitionedStorage:authKey',
    'applicationInsights:connectionString',
    'applicationInsights:InstrumentationKey',
    'runtimeSettings:telemetry:options:connectionString',
    'runtimeSettings:telemetry:options:instrumentationKey',
    'runtimeSettings:features:blobTranscript:connectionString',
];
exports.SettingsMemoryScope = SettingsMemoryScope;
//# sourceMappingURL=settingsMemoryScope.js.map